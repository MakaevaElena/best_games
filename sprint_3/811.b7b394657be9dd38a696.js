"use strict";(self.webpackChunkecommerce_application=self.webpackChunkecommerce_application||[]).push([[811],{429:(e,t,r)=>{r.d(t,{Z:()=>a});var o=r(37),s=r(683),n=r(233);class a{constructor(e){if(this.clientRoot=(0,o.mv)((0,s.p0)()).withProjectKey({projectKey:"best-games"}),this.createCart=e=>this.clientRoot.carts().post({body:{key:`cart-key-${Math.floor(1e5*Math.random())}`,currency:"RUB",country:"RU",customerId:e}}).execute(),e){const t=(0,n.r4)(e.email,e.password);this.clientRoot=(0,o.mv)(t).withProjectKey({projectKey:"best-games"})}}checkCustomerExist(e){return this.returnCustomerByEmail(e).then((e=>e))}returnCustomerByEmail(e){return this.clientRoot.customers().get({queryArgs:{where:`email="${e}"`}}).execute()}returnCustomerById(e){return this.clientRoot.customers().get({queryArgs:{where:`id="${e}"`}}).execute()}getCustomer({email:e,password:t}){return this.clientRoot.me().login().post({body:{email:e,password:t,updateProductData:!0}}).execute()}createUserRoot(e,t){const r=(0,n.r4)(e,t);return this.clientRoot=(0,o.mv)(r).withProjectKey({projectKey:"best-games"}),this.clientRoot}getCartByCustomerId(e){return this.clientRoot.carts().withCustomerId({customerId:e}).get().execute()}createCustomerDraft(e){const{email:t,password:r,firstName:o,lastName:s,countryCode:n,key:a}=e;return{email:t,password:r,key:a,firstName:o,lastName:s,addresses:[{country:n}],defaultShippingAddress:0}}createCustomer(e){try{return this.clientRoot.customers().post({body:this.createCustomerDraft(e)}).execute()}catch(e){return e}}getProducts(){return this.clientRoot.products().get().execute()}getProductbyID(e){return this.clientRoot.products().withId({ID:e}).get().execute()}getProductbyKey(e){return this.clientRoot.products().withKey({key:e}).get().execute()}productProjectionResponseID(e){return this.clientRoot.productProjections().withId({ID:e}).get({queryArgs:{staged:!0}}).execute()}productProjectionResponseKEY(e){return this.clientRoot.productProjections().withKey({key:e}).get({queryArgs:{staged:!0}}).execute()}}},683:(e,t,r)=>{r.d(t,{p0:()=>n});var o=r(631);const s="best-games",n=()=>{const e={host:"https://auth.europe-west1.gcp.commercetools.com",projectKey:s,credentials:{clientId:"A8PxwfHMEiItZ24oahyDGO2A",clientSecret:"RKi7doGwQ75b4wfuLsPuahDT366uOhUY",anonymousId:`best-games-${Math.floor(1e5*Math.random())}`},scopes:[`manage_project:${s}`]},t={host:"https://api.europe-west1.gcp.commercetools.com",fetch};return(new o.Qx).withAnonymousSessionFlow(e).withProjectKey(s).withHttpMiddleware(t).withLoggerMiddleware().build()}},233:(e,t,r)=>{r.d(t,{r4:()=>n});var o=r(631);const s="best-games",n=(e,t)=>{const r={host:"https://auth.europe-west1.gcp.commercetools.com",projectKey:s,credentials:{clientId:"A8PxwfHMEiItZ24oahyDGO2A",clientSecret:"RKi7doGwQ75b4wfuLsPuahDT366uOhUY",user:{username:e,password:t}},scopes:[`manage_project:${s}`],fetch},n={host:"https://api.europe-west1.gcp.commercetools.com",fetch};return(new o.Qx).withPasswordFlow(r).withProjectKey(s).withHttpMiddleware(n).withLoggerMiddleware().build()}},811:(e,t,r)=>{r.r(t),r.d(t,{default:()=>m,getView:()=>l});var o=r(429),s=r(567),n=r(602),a=r(891),c=r(213),i=r(928);const d={"content-wrapper":"content-wrapper--syQzU","product-view":"product-view--DjmcU","product-view__popup":"product-view__popup--lQrvI","product-section":"product-section--tfDUP","product-images":"product-images--YrCMs","product-image":"product-image--LVNWK","product-info":"product-info--hIRJM","product-name":"product-name--A7Cae",button:"button--nQVk8"};var u=r(249);const p="GAME not found";class m extends i.Z{constructor(e){super({tag:s.Z.SECTION,classNames:[d["product-view"]],textContent:""}),this.productId="",this.anonimApi=new o.Z,this.getProducts(),this.router=e,this.wrapper=(new u.Z).createTagElement("div",[d["content-wrapper"]]),this.getCreator().addInnerElement(this.wrapper)}initContent(e){e&&(this.productId=e),this.configView()}configView(){this.createContent()}setContent(e){this.wrapper.replaceChildren(""),e instanceof n.Z?this.wrapper.append(e.getElement()):this.wrapper.append(e)}createContent(){this.renderProductCart(this.productId)}createMainButton(){return new c.Z(a.bm.INDEX,(()=>{this.router.navigate(a._.INDEX)}))}renderProductCart(e){this.anonimApi.productProjectionResponseKEY(e).then((e=>{200!==e.statusCode&&this.createMessagePopup(p),console.log("product",e);const t=new n.Z({tag:s.Z.SECTION,classNames:[d["product-section"]],textContent:""}),r=new n.Z({tag:s.Z.DIV,classNames:[d["product-images"]],textContent:""}),o=new n.Z({tag:s.Z.DIV,classNames:[d["product-image"]],textContent:""});e.body.masterVariant.images&&(o.getElement().style.backgroundImage=`url(${e.body.masterVariant.images?.[0].url})`),console.log(e.body.masterVariant.images?.[0].url);const a=new n.Z({tag:s.Z.DIV,classNames:[d["product-info"]],textContent:"PRODUCT INFO"}),c=new n.Z({tag:s.Z.SPAN,classNames:[d["product-name"]],textContent:`${e.body.name.en}`}),i=new n.Z({tag:s.Z.SPAN,classNames:[d["product-category"]],textContent:`CATEGORY: ${e.body.masterVariant.attributes?.[3].value?.[0].key}`}),m=0!==e.body.masterVariant.prices?.length?`PRICE: ${e.body.masterVariant.prices?.[0].value?.centAmount} ${e.body.masterVariant.prices?.[0].value?.currencyCode}`:"",l=new n.Z({tag:s.Z.SPAN,classNames:[d["product-price"]],textContent:m}),h=new n.Z({tag:s.Z.DIV,classNames:[d["product-attributes"]],textContent:"ATTRIBUTES:"}),g=new n.Z({tag:s.Z.DIV,classNames:[d["product-developer"],d.attributes],textContent:`DEVELOPER: ${e.body.masterVariant.attributes?.[0].value[0]}`}),w=new n.Z({tag:s.Z.DIV,classNames:[d["product-developer"],d.attributes],textContent:`PLAYERS QUANTITY: ${e.body.masterVariant.attributes?.[1].value[0]}`}),y=new n.Z({tag:s.Z.DIV,classNames:[d["product-developer"],d.attributes],textContent:`PLATFORM: ${e.body.masterVariant.attributes?.[2].value[0].key}`}),I=new n.Z({tag:s.Z.DIV,classNames:[d["product-developer"],d.attributes],textContent:`GENRE: ${e.body.masterVariant.attributes?.[3].value[0].key}`}),E=new n.Z({tag:s.Z.DIV,classNames:[d["product-developer"],d.attributes],textContent:`RELEASE: ${e.body.masterVariant.attributes?.[4].value[0]}`}),C=(new u.Z).createTagElement("span",[d["product-video"]],""),b=new n.Z({tag:s.Z.SPAN,classNames:[d["product-description"]],textContent:`DESCRIPTION: ${e.body.description?.en}`}),Z=new n.Z({tag:s.Z.BUTTON,classNames:[d["product-description"],d.button],textContent:"ADD TO CART"});r.addInnerElement(o),t.addInnerElement(r),t.addInnerElement(a),a.addInnerElement(c),a.addInnerElement(i),a.addInnerElement(l),a.addInnerElement(b),a.addInnerElement(Z),a.addInnerElement(h),h.addInnerElement(g),h.addInnerElement(w),h.addInnerElement(y),h.addInnerElement(I),h.addInnerElement(E),this.wrapper.append(t.getElement()),this.wrapper.append(C)})).catch((()=>{this.createMessagePopup(p)}))}getProducts(){this.anonimApi.getProducts().then((e=>console.log(e))).catch((e=>{throw this.createMessagePopup("error.message"),new Error(e.message)}))}getProductByKey(e){this.anonimApi.productProjectionResponseKEY(e).then((e=>{console.log("product",e)}))}createMessagePopup(e){const t=new n.Z({tag:s.Z.DIV,classNames:[d["product-view__popup"]],textContent:e});this.getCreator().addInnerElement(t),t.getElement().addEventListener("click",(()=>{t.getElement().remove()}))}}function l(e){return new m(e)}},249:(e,t,r)=>{r.d(t,{Z:()=>o});class o{createTagElement(e,t,r=""){const o=document.createElement(e);return o.classList.add(...t),o.innerHTML=r||"",o}}}}]);