"use strict";(self.webpackChunkecommerce_application=self.webpackChunkecommerce_application||[]).push([[762],{4121:(e,t,s)=>{s.d(t,{Z:()=>r});var a=s(3037),i=s(7683),n=s(5233);class r{constructor(e){if(this.clientRoot=(0,a.mv)((0,i.p0)()).withProjectKey({projectKey:"best-games"}),e){const t=(0,n.r4)(e.email,e.password);this.clientRoot=(0,a.mv)(t).withProjectKey({projectKey:"best-games"})}}createCustomerDraft(e){const{email:t,password:s,firstName:a,lastName:i,dateOfBirth:n,countryShippingCode:r,countryStreetShipping:l,countryBillingCode:o,countryStreetBilling:d,countryCityShipping:u,countryPostalShipping:c,countryCityBilling:h,countryPostalBilling:p,defaultBillingAddressNum:m,defaultShippingAddressNum:E,key:A}=e;return{email:t,password:s,key:A,dateOfBirth:n,firstName:a,lastName:i,addresses:[{country:r,streetName:l,city:u,postalCode:c},{country:o,streetName:d,city:h,postalCode:p}],defaultShippingAddress:E,defaultBillingAddress:m,shippingAddresses:[0],billingAddresses:[1]}}createCustomer(e){return this.clientRoot.customers().post({body:this.createCustomerDraft(e)}).execute()}getCustomer(e){return this.clientRoot.customers().get({queryArgs:{where:`email="${e}"`}}).execute()}}},762:(e,t,s)=>{s.r(t),s.d(t,{default:()=>P});const a={"field-group":"field-group--magme"},i={address:"address--jO8U4"},n={button:"button--ub5p1"},r={container:"container--aBkEY"},l={wrap:"wrap--DHYWB"};var o=s(1567),d=s(6249),u=s(4602),c=s(891),h=s(213),p=s(928);var m=s(4121),E=s(3800);const A={"field-view":"field-view--kJ8a8"},T={active:"active--GNwPO"},I={"redaction-button":"redaction-button--gfaO6"};var g,S=s(8717);!function(e){e.ADD_SHIPPING_ADDRESS_BUTTON="add shipping address",e.ADD_BILLING_ADDRESS_BUTTON="add billing address",e.REMOVE_SHIPPING_ADDRESS_BUTTON="remove shipping address",e.REMOVE_BILLING_ADDRESS_BUTTON="remove billing address",e.TITLE_ADDRESS_SHIPPING="shipping addresses",e.TITLE_ADDRESS_BILLING="billing addresses",e.DEFAULT_ADDRESS="default address",e.REDACTION_MODE_BUTTON="edit",e.CONFIRM_BUTTON="confirm",e.CANCEL_BUTTON="cancel",e.CONFIRM_MESSAGE_INFO="new data successfully saved",e.CANCEL_MESSAGE_INFO="modifications have been canceled"}(g||(g={}));const N=g;var D,L=s(5311),b=s(22),C=s(8624),M=s(3226);class _{constructor({group:e,inputType:t,inputValue:s,labelValue:a}){this.cancelButton=this.createButton(N.CANCEL_BUTTON,Object.values(I),this.cancelValueHandler.bind(this),L.Z.CLICK),this.confirmButton=this.createButton(N.CONFIRM_BUTTON,Object.values(I),this.saveValueHandler.bind(this),L.Z.CLICK),this.redactionModeButton=this.createButton(N.REDACTION_MODE_BUTTON,Object.values(I),this.redactionModeHandler.bind(this),L.Z.CLICK);const i=this.createInputParams(e,t,a);this.inputElement=this.createInputElement(i),void 0!==s&&(this.elementField=this.createFieldElement(s,a),this.value=s)}getElementField(){return this.elementField}createInputParams(e,t,s){return{group:e,attributes:{type:t,name:S.Ti.EMAIL,placeholder:s}}}createFieldElement(e,t){const s=document.createElement(o.Z.DIV);return s.classList.add(...Object.values(A)),void 0!==e&&this.inputElement.setInputValue(e),void 0!==t&&this.inputElement.setLabel(t),this.inputElement.removeMessageElement(),this.inputElement.setDisabled(),s.append(this.inputElement.getElement(),this.redactionModeButton),s}createInputElement(e){return new E.Z(e)}createButton(e,t,s,a){const i=document.createElement(o.Z.BUTTON);return i.textContent=e,i.classList.add(...Object.values(n)),t&&i.classList.add(...t),s&&a&&i.addEventListener(a,s),i}showInfoMessage(e){(new M.Z).showMessage(e)}showErrorMessage(e){(new C.Z).showMessage(e)}showWarningMessage(e){(new b.Z).showMessage(e)}redactionModeHandler(){this.elementField.removeChild(this.redactionModeButton),this.inputElement.removeDisabled(),this.elementField.append(this.confirmButton,this.cancelButton),this.elementField.classList.add(...Object.values(T))}saveValueHandler(){this.exitEditModeChangeButton(),this.value=this.inputElement.getInputValue(),this.showInfoMessage(N.CONFIRM_MESSAGE_INFO)}cancelValueHandler(){this.exitEditModeChangeButton(),this.inputElement.setInputValue(this.value),this.showInfoMessage(N.CANCEL_MESSAGE_INFO)}exitEditModeChangeButton(){this.inputElement.setDisabled(),this.elementField.removeChild(this.confirmButton),this.elementField.removeChild(this.cancelButton),this.elementField.append(this.redactionModeButton),this.elementField.classList.remove(...Object.values(T))}}!function(e){e.MAIN="main",e.SHIPPING="shipping",e.BILLING="billing"}(D||(D={}));const B=D;var f=s(4296),O=s(7881),R=s(2953);class P extends p.Z{constructor(e){super({tag:o.Z.SECTION,classNames:["profile-view--tXFs_"],textContent:""}),this.router=e,this.emailAddress=window.localStorage.getItem(R.Z.MAIL_ADDRESS),this.observer=f.Z.getInstance(),this.wrapper=(new d.Z).createTagElement("div",["content-wrapper--LuY91"]),this.getCreator().addInnerElement(this.wrapper),this.userData=this.request(),this.configView(),this.observer.subscribe(O.Z.LOGIN,this.login.bind(this)),this.observer.subscribe(O.Z.LOGOUT,this.logoutListener.bind(this))}setContent(e){this.wrapper.replaceChildren(""),e instanceof u.Z?this.wrapper.append(e.getElement()):this.wrapper.append(e)}configView(){this.createContent()}login(){this.emailAddress=window.localStorage.getItem(R.Z.MAIL_ADDRESS),this.userData=this.request()}logoutListener(){this.wrapper.textContent="";const e=this.createMainButton();this.wrapper.append(e.getElement())}createContent(){this.wrapper.textContent="";const e=this.createMainButton();this.wrapper.append(e.getElement());const t=this.createFields(),s=(new d.Z).createTagElement("div",Object.values(l));s.append(...t),this.wrapper.append(s)}createMainButton(){return new h.Z(c.bm.INDEX,(()=>{this.router.navigate(c._.INDEX)}))}request(){const e=new m.Z,t=this.createUserData(),s=this.emailAddress;return s&&e.getCustomer(s).then((e=>{const s=e.body.results[0];return null!=s.firstName&&(t.firstName=s.firstName),null!=s.lastName&&(t.lastName=s.lastName),null!=s.dateOfBirth&&(t.dateOfBirth=s.dateOfBirth),t.shippingAddresses=this.getShippingBillingAddresses(s.addresses,s.shippingAddressIds,s.defaultShippingAddressId),t.billingAddresses=this.getShippingBillingAddresses(s.addresses,s.billingAddressIds,s.defaultBillingAddressId),this.configView(),t})).catch((e=>{console.log(e.message)})),t}getShippingBillingAddresses(e,t,s){const a=[];return void 0!==t&&e.forEach((e=>{t.includes(e.id)&&(e.id===s&&(e.isDefault=!0),a.push(e))})),a}createMainProps(){return[{group:B.MAIN,inputType:S.oP.TEXT,labelValue:S.I$.FIRST_NAME,inputValue:this.userData.firstName},{group:B.MAIN,inputType:S.oP.TEXT,labelValue:S.I$.LAST_NAME,inputValue:this.userData.lastName},{group:B.MAIN,inputType:S.oP.DATE,labelValue:S.I$.DATE_OF_BIRTH,inputValue:this.userData.dateOfBirth}]}createAdressesProps(e,t){const s=[];return e.forEach((e=>{const a=this.createCountries();let i="",n=!1;a.flat().forEach((t=>{t.slice(-2)===e.country&&(i=t.slice(0,-2))})),e.isDefault&&(n=!0);const r=[{group:t,inputType:S.oP.TEXT,labelValue:S.I$.CITY,inputValue:e.city,isDefaultAddress:n},{group:t,inputType:S.oP.TEXT,labelValue:S.I$.STREET,inputValue:e.streetName},{group:t,inputType:S.oP.TEXT,labelValue:S.I$.POSTAL,inputValue:e.postalCode},{group:t,inputType:S.oP.TEXT,labelValue:S.I$.COUNTRY,inputValue:i}];s.push(r)})),s}createContainer(){const e=document.createElement(o.Z.DIV);return e.classList.add(...Object.values(r)),e}createFieldGroup(e){const t=document.createElement(o.Z.DIV);if(t.classList.add(...Object.values(a)),e){const s=this.сreateTitleAddress(e);t.append(s)}return t}createFields(){const e=this.createMainProps(),t=this.createFieldGroup(),s=this.createAdressesProps(this.userData.shippingAddresses,B.SHIPPING),a=this.createAdressesProps(this.userData.billingAddresses,B.SHIPPING),i=this.createFieldGroup(N.TITLE_ADDRESS_SHIPPING),n=this.createFieldGroup(N.TITLE_ADDRESS_BILLING),r=[t];return e.forEach((e=>{this.fillMainFieldGroups(e,t)})),s.forEach((e=>{this.fillAddressGroup(e,i)})),a.forEach((e=>{this.fillAddressGroup(e,n)})),i.children.length>1&&r.push(i),i.children.length>1&&r.push(n),r}fillMainFieldGroups(e,t){const s=new _(e);t.append(s.getElementField())}fillAddressGroup(e,t){const s=this.createFieldGroup();s.classList.add(...Object.values(i)),e.forEach((e=>{if(e.isDefaultAddress){const e=this.сreateTitleAddress(N.DEFAULT_ADDRESS);s.append(e)}this.fillMainFieldGroups(e,s)})),t.append(s)}createButtonsAddressesAdd(){this.createButton(N.ADD_SHIPPING_ADDRESS_BUTTON),this.createButton(N.ADD_BILLING_ADDRESS_BUTTON)}сreateTitleAddress(e){const t=document.createElement("h3");return t.textContent=e,t}createButton(e){const t=document.createElement(o.Z.BUTTON);return t.classList.add(...Object.values(n)),t.textContent=e,t}createUserData(){const e="unassigned";return{firstName:e,lastName:e,dateOfBirth:e,shippingAddresses:[{city:e,country:e,id:e,postalCode:e,streetName:e,isDefault:!1}],billingAddresses:[{city:e,country:e,id:e,postalCode:e,streetName:e,isDefault:!1}]}}createCountries(){return[["Belarus BY","China CN","Colombia CO","Ecuador EC","Kazakhstan KZ","Kyrgyzstan KG","Malawi MW","Nigeria NG","Romania RO","Russia RU","Singapore SG","Tajikistan TJ","Trinidad and Tobago TT","Turkmenistan TM","Uzbekistan UZ","India IN"],["Czech Republic CZ","Greece CR","Slovakia SK","Sweden SE","Algeria DZ","Bhutan BT","Bosnia and Herzegovina BA","Costa Rica CR","Croatia HR","Cuba CU","Dominican Republic DO","Egypt EG","Estonia EE","Finland FI","France FR","Germany DE","Guatemala GT","Indonesia ID","Iraq IQ","Italy IT","Jordan JO","Kenya KE","Korea, South KR","Kosovo XK","Kuwait KW","Laos LA","Malaysia MY","Maldives MV","Mauritius MU","Mexico MX","Mongolia MN","Montenegro ME","Morocco MA","Myanmar MM","Namibia NA","Nepal NP","Nicaragua NI","Pakistan PK","Puerto Rico PR","Senegal SN","Serbia RS","Spain ES","Sri Lanka LK","Sudan SD","Tanzania TZ","Thailand TH","Turkey TR","Ukraine UA","United States US","Uruguay UY","Vietnam VN","Zambia ZM","Saudi Arabia SA","Iran IR","Peru PE","Åland AX","Lebanon LB","Brazil BR","American Samoa AS","Guam GU","Marshall Islands MH","Micronesia FM","Northern Mariana Islands MP","Palau PW","U.S. Virgin Islands VI"],["Guinea","Iceland","Lesotho","Madagascar","Oman","Palestine","Papua New Guinea","Afghanistan AF","Albania AL","Argentina AR","Armenia AM","Australia AU","Austria AT","Bangladesh BD","Belgium BE","Bulgaria BG","Cape Verde CV","Christmas Island CX","Greenland GL","Hungary HU","Liechtenstein LI","Luxembourg LU","New Zealand NZ","Niger NE","North Macedonia MK","Norway NO","Panama PA","Paraguay PY","Philippines PH","Portugal PT","Singapore SG","South Africa ZA","Switzerland CH","Svalbard and Jan Mayen SJ","Tunisia TN","Portugal PT","Slovenia SI","Venezuela VE"],["Jamaica JM","Singapore SG"],["Faroe Islands","Barbados","Andorra AD"],["Azerbaijan AZ","Latvia LV","British Virgin Islands VG","Saint Kitts and Nevis KN","Saint Vincent and the Grenadines VC","Samoa WS","Moldova MD"],["Lithuania LT","Barbados BB"]]}}},6193:(e,t,s)=>{var a;s.d(t,{Z:()=>i}),function(e){e.BUTTON_DEFAULT="Make it default",e.BUTTON_UN_DEFAULT="Don`t make it default",e.BUTTON_SUBMIT="REGISTER",e.SHOW_BUTTON="show",e.TITLE="Registration Page",e.DESCRIPTION="After filling in all the fields, press the confirmation button",e.ADD_BILLING_ADDRESS="Add billing address",e.REMOVE_BILLING_ADDRESS="Remove billing address",e.CHECK_VALIDITY="check that all fields are filled in correctly",e.REGISTRATION_OK="You have successfully registered",e.TO_LOGIN="Go to login"}(a||(a={}));const i=a},5311:(e,t,s)=>{var a;s.d(t,{Z:()=>i}),function(e){e.CLICK="click",e.BLUR="blur",e.CHANGE="input"}(a||(a={}));const i=a},2953:(e,t,s)=>{var a;s.d(t,{Z:()=>i}),function(e){e.MAIL_ADDRESS="mailAddress"}(a||(a={}));const i=a},8717:(e,t,s)=>{var a,i,n,r,l,o,d;s.d(t,{I$:()=>n,Ti:()=>i,WA:()=>r,Yk:()=>d,oP:()=>a,uv:()=>l}),function(e){e.PASSWORD="password",e.EMAIL="email",e.TEXT="text",e.DATE="date",e.CHECKBOX="checkbox"}(a||(a={})),function(e){e.PASSWORD="password",e.EMAIL="email",e.REPEAT_PASSWORD="repeat-password",e.FIRST_NAME="first-name",e.LAST_NAME="last-name",e.DATE_OF_BIRTH="date-of-birth",e.SHIPPING_CITY="shipping-city",e.SHIPPING_STREET="shipping-street",e.SHIPPING_POSTAL="shipping-postal",e.SHIPPING_COUNTRY="shipping-country",e.BILLING_CITY="billing-city",e.BILLING_STREET="billing-street",e.BILLING_POSTAL="billing-postal",e.BILLING_COUNTRY="country"}(i||(i={})),function(e){e.PASSWORD="Password",e.EMAIL="Email",e.REPEAT_PASSWORD="Repeat password",e.FIRST_NAME="First name",e.LAST_NAME="Last name",e.CITY="City",e.STREET="Street",e.POSTAL="Postal",e.COUNTRY="Country",e.DATE_OF_BIRTH="Date of birth"}(n||(n={})),function(e){e.EMAIL_HINT="Must contain valid email address (example@gmail.com)",e.PASSWORD="Minimum 8 characters, at least 1 uppercase letter, 1 lowercase letter, 1 number and 1 special character (!@#$%^&*)",e.PASSWORD_REPEAT="The passwords must match",e.EASY_TEXT="Must contain at least one character",e.DATE_OF_BIRTH_HINT="Only 13 years old or older",e.TEXT="Must contain at least one character and no special characters or numbers",e.POSTAL_HINT="Must follow the format for the country (e.g., 12345 or A1B 2C3 for the U.S. and Canada, respectively)",e.COUNTRY_HINT="Must be a valid country from a predefined list or autocomplete field",e.WRONG_COUNTRY="Select country"}(r||(r={})),function(e){e.PASSWORD="^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[!@#$%^&*])[A-Za-z\\d!@#$%^&*]{8,}$",e.TEXT="^(?!.*\\d)(?!.*[!@#$%^&*])[А-Яа-яA-Za-z\\d!@#$%^&*]{1,}$",e.DATE_OF_BIRTH_MAX="13",e.EMAIL="[a-z0-9]+[a-z0-9._%+\\-]+@[a-z]+\\.[a-z]{2,}"}(l||(l={})),o||(o={}),function(e){e.SHIPPING_ADDRESS="DELIVERY ADDRESS",e.SHIPPING_ADDRESS_DEFAULT="DELIVERY ADDRESS (default)",e.BILLING_ADDRESS="BILLING ADDRESS",e.BILLING_ADDRESS_DEFAULT="BILLING ADDRESS (default)"}(d||(d={}))},3800:(e,t,s)=>{s.d(t,{Z:()=>o});const a={label:"label--sakEu"};var i=s(1567),n=s(5311),r=s(8717),l=s(6193);class o{constructor(e){this.inputElement=document.createElement("input"),this.messageElement=document.createElement(i.Z.SPAN),this.element=document.createElement(i.Z.DIV),this.createElement(e),this.inputElement.addEventListener(n.Z.CHANGE,this.showErrorhandler.bind(this)),e.attributes.title?(this.title=e.attributes.title,this.messageText=this.title):(this.title="",this.messageText=this.inputElement.validationMessage)}setAttribute(e,t){this.inputElement.setAttribute(e,t)}removeAttribute(e){this.inputElement.removeAttribute(e)}removeMessage(){this.messageElement.textContent=""}removeMessageElement(){this.element.removeChild(this.messageElement)}appendMessage(){this.element.append(this.messageElement)}setMessageError(e){this.messageElement.textContent=e}setCustomValidity(e){this.inputElement.setCustomValidity(e)}setInputValue(e){this.inputElement.value=e}getElement(){return this.element}getInputValue(){return this.inputElement.value}getInput(){return this.inputElement}setLabel(e){const t=document.createElement("label");t.textContent=e,t.classList.add(...Object.values(a)),t.append(this.inputElement),this.element.append(t)}setDisabled(){this.inputElement.disabled=!0}removeDisabled(){this.inputElement.disabled=!1}getTitle(){return this.getInput().title}setTitle(e){this.inputElement.title=e,this.title=e}setPattern(e){this.inputElement.pattern=e}createElement(e){if(this.element.classList.add("input__container--TYJjR"),e.classNames&&this.element.classList.add(...e.classNames),this.createInput(e),void 0!==e.callback){let t;!function(e){e[e.HANDLER=0]="HANDLER",e[e.EVENT=1]="EVENT"}(t||(t={})),e.callback.forEach((e=>{this.setCallback(e[t.HANDLER],e[t.EVENT])}))}this.messageElement=document.createElement(i.Z.SPAN),this.showErrorhandler(),this.messageElement.classList.add("input__symbol--TTeU5"),this.element.append(this.inputElement,this.messageElement)}setCallback(e,t){this.inputElement.addEventListener(t,e)}createInput(e){this.inputElement.classList.add("input--DAGU8"),this.inputElement.required=!0,this.setAttributes(e.attributes),e.attributes.type===r.oP.PASSWORD&&this.showPassword()}setAttributes(e){Object.entries(e).forEach((([e,t])=>{this.inputElement.setAttribute(e,t)}))}showPassword(){const e=document.createElement("input");e.type=r.oP.CHECKBOX,e.classList.add("checkbox--rlIy7");const t=document.createElement("label");t.textContent=l.Z.SHOW_BUTTON,t.append(e),t.classList.add("inputShowPassword--jXW3M"),this.element.append(t),this.inputElement.classList.add("input_password--e4VKU"),e.addEventListener(n.Z.CLICK,this.toggleVisibilityHandler.bind(this))}toggleVisibilityHandler(){this.inputElement.type===r.oP.PASSWORD?this.inputElement.type=r.oP.TEXT:this.inputElement.type=r.oP.PASSWORD}showErrorhandler(){this.messageText=this.inputElement.validationMessage,this.inputElement.validity.patternMismatch&&(this.messageText=this.title),this.messageElement.textContent=this.messageText}}}}]);