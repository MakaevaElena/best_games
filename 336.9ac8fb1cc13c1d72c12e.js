"use strict";(self.webpackChunkecommerce_application=self.webpackChunkecommerce_application||[]).push([[336],{5336:(e,t,o)=>{o.r(t),o.d(t,{default:()=>p});var r=o(1567),n=o(4602),s=o(891),a=o(213),i=o(928);const c={"index-view":"index-view--LEth9","content-wrapper":"content-wrapper--PnS7N","promo__code-list":"promo__code-list--s9GPp","promo__code-block":"promo__code-block--mMit5","promo__code-element":"promo__code-element--NVzTQ"};var d=o(6249),m=o(8624);class p extends i.Z{constructor(e,t){super({tag:r.Z.SECTION,classNames:[c["index-view"]],textContent:""}),this.promoList=new n.Z({tag:r.Z.DIV,classNames:[c["promo__code-list"]],textContent:"Use promo codes:"}),this.wrapper=(new d.Z).createTagElement("div",[c["content-wrapper"]]),this.getCreator().addInnerElement(this.wrapper),this.router=e,this.api=t.api,this.configView()}configView(){this.createLinks(),this.renderPromoCodes()}renderPromoCodes(){this.api.getClientApi().getPromoCodes().then((e=>{e.body.results.forEach((e=>{this.renderPromoCode(e)}))})).catch((e=>{e instanceof Error&&(new m.Z).showMessage(e.message)})),this.wrapper.append(this.promoList.getElement())}renderPromoCode(e){const t=new n.Z({tag:r.Z.DIV,classNames:[c["promo__code-block"]],textContent:""}),o=new n.Z({tag:r.Z.DIV,classNames:[c["promo__code-element"]],textContent:`${e.code}`}),s=new n.Z({tag:r.Z.DIV,classNames:[c["promo__code-text"]],textContent:"for discount %"});t.addInnerElement(o),t.addInnerElement(s),this.promoList.addInnerElement(t)}setContent(e){this.getCreator().clearInnerContent(),this.getCreator().addInnerElement(e)}createLinks(){const e=(new d.Z).createTagElement("div",[c["content-wrapper"]]);this.getCreator().addInnerElement(e)}createSignInButton(){return new a.Z(s.bm.REGISTRATION,(()=>{"true"===localStorage.getItem("isLogin")?this.router.setHref(s._.INDEX):this.router.setHref(s._.REGISTRATION)}))}}}}]);