"use strict";(self.webpackChunkecommerce_application=self.webpackChunkecommerce_application||[]).push([[45],{5429:(e,t,r)=>{r.d(t,{Z:()=>s});var a=r(3037),n=r(7683),o=r(5233),c=r(9909);class s{constructor(e){if(this.clientRoot=(0,a.mv)((0,n.p0)()).withProjectKey({projectKey:"best-games"}),this.addItemToCartByID=(e,t,r)=>this.clientRoot.carts().withId({ID:e}).post({body:{version:t,actions:[{action:"addLineItem",sku:r}]}}).execute(),e){const t=(0,o.r4)(e.email,e.password);this.clientRoot=(0,a.mv)(t).withProjectKey({projectKey:"best-games"})}}checkCustomerExist(e){return this.returnCustomerByEmail(e).then((e=>e))}returnCustomerByEmail(e){return this.clientRoot.customers().get({queryArgs:{where:`email="${e}"`}}).execute()}getCustomerByID(e){return this.clientRoot.customers().get({queryArgs:{where:`id="${e}"`}}).execute()}getCustomer({email:e,password:t}){return this.clientRoot.me().login().post({body:{email:e,password:t,updateProductData:!0}}).execute()}createUserRoot(e,t){const r=(0,o.r4)(e,t);return this.clientRoot=(0,a.mv)(r).withProjectKey({projectKey:"best-games"}),this.clientRoot}getCategory(e){return this.clientRoot.categories().withId({ID:e}).get().execute()}createCustomerDraft(e){const{email:t,password:r,firstName:a,lastName:n,countryCode:o,key:c}=e;return{email:t,password:r,key:c,firstName:a,lastName:n,addresses:[{country:o}],defaultShippingAddress:0}}createCustomer(e){try{return this.clientRoot.customers().post({body:this.createCustomerDraft(e)}).execute()}catch(e){return e}}getProducts(){return this.clientRoot.products().get().execute()}getProductbyID(e){return this.clientRoot.products().withId({ID:e}).get().execute()}getProductbyKey(e){return this.clientRoot.products().withKey({key:e}).get().execute()}productProjectionResponseID(e){return this.clientRoot.productProjections().withId({ID:e}).get({queryArgs:{staged:!0}}).execute()}productProjectionResponseKEY(e){return this.clientRoot.productProjections().withKey({key:e}).get({queryArgs:{staged:!0}}).execute()}getCartByCustomerId(e){return this.clientRoot.carts().withCustomerId({customerId:e}).get().execute()}getCartByCartID(e){return this.clientRoot.carts().withId({ID:e}).get().execute()}createCart(){return this.clientRoot.carts().post({body:{key:`cart-key-${c.Z.newGuid()}`,currency:"USD",country:"US"}}).execute()}}},7683:(e,t,r)=>{r.d(t,{p0:()=>c});var a=r(9631),n=r(9909);const o="best-games",c=()=>{const e=`best-games-${n.Z.newGuid().slice(0,10)}`;localStorage.setItem("anonymousId",e);const t={host:"https://auth.europe-west1.gcp.commercetools.com",projectKey:o,credentials:{clientId:"A8PxwfHMEiItZ24oahyDGO2A",clientSecret:"RKi7doGwQ75b4wfuLsPuahDT366uOhUY",anonymousId:e},scopes:[`manage_project:${o}`]};return(new a.Qx).withAnonymousSessionFlow(t).withProjectKey(o).withHttpMiddleware({host:"https://api.europe-west1.gcp.commercetools.com"}).withLoggerMiddleware().build()}},5233:(e,t,r)=>{r.d(t,{r4:()=>o});var a=r(9631);const n="best-games",o=(e,t)=>{const r={host:"https://auth.europe-west1.gcp.commercetools.com",projectKey:n,credentials:{clientId:"A8PxwfHMEiItZ24oahyDGO2A",clientSecret:"RKi7doGwQ75b4wfuLsPuahDT366uOhUY",user:{username:e,password:t}},scopes:[`manage_project:${n}`],fetch},o={host:"https://api.europe-west1.gcp.commercetools.com",fetch};return(new a.Qx).withPasswordFlow(r).withProjectKey(n).withHttpMiddleware(o).withLoggerMiddleware().build()}},8045:(e,t,r)=>{r.r(t),r.d(t,{default:()=>m});var a=r(1567),n=r(6249),o=r(4602),c=r(928);const s={"cart-view":"cart-view--NG6pU","content-wrapper":"content-wrapper--sTIw_","cart-section":"cart-section--tJdJo","cart-header":"cart-header--laEwz","cart-header__image":"cart-header__image--qW_VY","cart-header__title":"cart-header__title--RqNcm","cart-header__quantity":"cart-header__quantity--Lv1Ap","cart-header__order-value":"cart-header__order-value--UeTX8","cart-cell":"cart-cell--nzjIP","item-block":"item-block--fYn1k","item-block__image":"item-block__image--fPQMh","item-block__info-block":"item-block__info-block--FcSkx","item-block__name":"item-block__name--zeSeB","item-block__details":"item-block__details--b90Nk","item-block__quantity":"item-block__quantity--JwIvp","item-block__quantity-input":"item-block__quantity-input--xXFHp","item-block__order-value":"item-block__order-value--KByrB"};var i=r(5429),l=r(891);class m extends c.Z{constructor(e){super({tag:a.Z.SECTION,classNames:[s["cart-view"]],textContent:""}),this.cartSection=new o.Z({tag:a.Z.SECTION,classNames:[s["cart-section"]],textContent:""}),this.router=e,this.wrapper=(new n.Z).createTagElement("div",[s["content-wrapper"]]),this.anonimApi=new i.Z,this.getCreator().addInnerElement(this.wrapper),this.configView()}configView(){this.createCartHeader();const e=localStorage.getItem("anonimCartID");e&&this.anonimApi.getCartByCartID(e).then((e=>e.body.lineItems.forEach((e=>{console.log("item.key",e.productKey),e.productKey&&this.createCartItem(e.productKey)})))).catch()}createCartItem(e){this.anonimApi.productProjectionResponseKEY(e).then((t=>{const r=t.body.masterVariant,c=new o.Z({tag:a.Z.SECTION,classNames:[s["item-block"]],textContent:""}),i=new o.Z({tag:a.Z.DIV,classNames:[s["item-block__image"],s["cart-cell"]],textContent:""});r.images&&(i.getElement().style.backgroundImage=`url(${r.images?.[0].url})`);const m=new o.Z({tag:a.Z.DIV,classNames:[s["item-block__info-block"],s["cart-cell"]],textContent:""}),d=new o.Z({tag:a.Z.DIV,classNames:[s["item-block__name"]],textContent:`${t.body.name.en}`}),u=new o.Z({tag:a.Z.SPAN,classNames:[s["item-block__details"]],textContent:"More details"});u.getElement().addEventListener("click",(()=>{const t=`${l._.CATALOG}/${e}`;this.router.setHref(t)}));const h=new o.Z({tag:a.Z.DIV,classNames:[s["item-block__order-summ"]],textContent:""}),p=new o.Z({tag:a.Z.DIV,classNames:[s["item-block__quantity"],s["cart-cell"]],textContent:""}),g=(new n.Z).createTagElement("input",[s["item-block__quantity-input"],s["cart-cell"]]);g.setAttribute("type","number"),g.setAttribute("min","1"),g.setAttribute("value","1"),g.addEventListener("change",(()=>{h.getElement().textContent=t.body.masterVariant.prices?.[1].value?`PRICE: ${(Number(t.body.masterVariant.prices?.[1].value?.centAmount)/100*Number(g.value)).toFixed(2)} ${t.body.masterVariant.prices?.[1].value?.currencyCode}`:""}));const w=new o.Z({tag:a.Z.DIV,classNames:[s["item-block__order-value"],s["cart-cell"]],textContent:""});h.getElement().textContent=t.body.masterVariant.prices?.[1].value?`PRICE: ${(Number(t.body.masterVariant.prices?.[1].value?.centAmount)/100).toFixed(2)} ${t.body.masterVariant.prices?.[1].value?.currencyCode}`:"";const _=new o.Z({tag:a.Z.DIV,classNames:[s["item-block__remove-button"]],textContent:"itemRemoveButton"});c.addInnerElement(i),m.addInnerElement(d),m.addInnerElement(u),c.addInnerElement(m),p.addInnerElement(g),c.addInnerElement(p),w.addInnerElement(h),w.addInnerElement(_),c.addInnerElement(w),this.cartSection.addInnerElement(c.getElement())}))}createCartHeader(){const e=new o.Z({tag:a.Z.SECTION,classNames:[s["cart-header"]],textContent:""}),t=new o.Z({tag:a.Z.SECTION,classNames:[s["cart-header__image"],s["cart-cell"]],textContent:""}),r=new o.Z({tag:a.Z.SECTION,classNames:[s["cart-header__title"],s["cart-cell"]],textContent:"Items"}),n=new o.Z({tag:a.Z.SECTION,classNames:[s["cart-header__quantity"],s["cart-cell"]],textContent:"Quantity"}),c=new o.Z({tag:a.Z.SECTION,classNames:[s["cart-header__order-value"],s["cart-cell"]],textContent:"Order Value"});e.addInnerElement(t),e.addInnerElement(r),e.addInnerElement(n),e.addInnerElement(c),this.cartSection.addInnerElement(e),this.wrapper.append(this.cartSection.getElement())}setContent(e){this.getCreator().clearInnerContent(),this.getCreator().addInnerElement(e)}}},9909:(e,t,r)=>{r.d(t,{Z:()=>a});class a{static newGuid(){const e=[];return e.push(a.getHexRandom(268435456,4294967295)),e.push(a.getHexRandom(4096,65535)),e.push(a.getHexRandom(4096,65535)),e.push(a.getHexRandom(4096,65535)),e.push(a.getHexRandom(17592186044416,0xffffffffffff)),e.join("-")}static getHexRandom(e,t){return Math.floor(e+Math.random()*(t+1-e)).toString(16)}}}}]);