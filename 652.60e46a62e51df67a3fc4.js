"use strict";(self.webpackChunkecommerce_application=self.webpackChunkecommerce_application||[]).push([[652],{2523:(t,e,i)=>{i.d(e,{Z:()=>o});var n=i(8081),r=i.n(n),s=i(3645),a=i.n(s)()(r());a.push([t.id,".swiper{max-width:30rem;width:50%;aspect-ratio:1}@media(max-width: 550px){.swiper{width:80%}}.swiper-button-prev,.swiper-button-next{color:red}",""]);const o=a},5318:(t,e,i)=>{i.d(e,{Z:()=>o});var n=i(8081),r=i.n(n),s=i(3645),a=i.n(s)()(r());a.push([t.id,".spinner {\n  position: absolute;\n  top: calc(50vh - 60px);\n  left: calc(50vw - 60px);\n  display: block;\n}\n\n.spinner_hide {\n  display: none;\n}\n\n#floatingCirclesG {\n  position: relative;\n  width: 120px;\n  height: 120px;\n  margin: auto;\n  transform: scale(0.6);\n  -o-transform: scale(0.6);\n  -ms-transform: scale(0.6);\n  -webkit-transform: scale(0.6);\n  -moz-transform: scale(0.6);\n}\n\n.f_circleG {\n  position: absolute;\n  background-color: rgb(255, 255, 255);\n  height: 22px;\n  width: 22px;\n  border-radius: 12px;\n  -o-border-radius: 12px;\n  -ms-border-radius: 12px;\n  -webkit-border-radius: 12px;\n  -moz-border-radius: 12px;\n  animation-name: f_fadeG;\n  -o-animation-name: f_fadeG;\n  -ms-animation-name: f_fadeG;\n  -webkit-animation-name: f_fadeG;\n  -moz-animation-name: f_fadeG;\n  animation-duration: 1.2s;\n  -o-animation-duration: 1.2s;\n  -ms-animation-duration: 1.2s;\n  -webkit-animation-duration: 1.2s;\n  -moz-animation-duration: 1.2s;\n  animation-iteration-count: infinite;\n  -o-animation-iteration-count: infinite;\n  -ms-animation-iteration-count: infinite;\n  -webkit-animation-iteration-count: infinite;\n  -moz-animation-iteration-count: infinite;\n  animation-direction: normal;\n  -o-animation-direction: normal;\n  -ms-animation-direction: normal;\n  -webkit-animation-direction: normal;\n  -moz-animation-direction: normal;\n}\n\n#frotateG_01 {\n  left: 0;\n  top: 51px;\n  animation-delay: 0.45s;\n  -o-animation-delay: 0.45s;\n  -ms-animation-delay: 0.45s;\n  -webkit-animation-delay: 0.45s;\n  -moz-animation-delay: 0.45s;\n}\n\n#frotateG_02 {\n  left: 15px;\n  top: 15px;\n  animation-delay: 0.6s;\n  -o-animation-delay: 0.6s;\n  -ms-animation-delay: 0.6s;\n  -webkit-animation-delay: 0.6s;\n  -moz-animation-delay: 0.6s;\n}\n\n#frotateG_03 {\n  left: 51px;\n  top: 0;\n  animation-delay: 0.75s;\n  -o-animation-delay: 0.75s;\n  -ms-animation-delay: 0.75s;\n  -webkit-animation-delay: 0.75s;\n  -moz-animation-delay: 0.75s;\n}\n\n#frotateG_04 {\n  right: 15px;\n  top: 15px;\n  animation-delay: 0.9s;\n  -o-animation-delay: 0.9s;\n  -ms-animation-delay: 0.9s;\n  -webkit-animation-delay: 0.9s;\n  -moz-animation-delay: 0.9s;\n}\n\n#frotateG_05 {\n  right: 0;\n  top: 51px;\n  animation-delay: 1.05s;\n  -o-animation-delay: 1.05s;\n  -ms-animation-delay: 1.05s;\n  -webkit-animation-delay: 1.05s;\n  -moz-animation-delay: 1.05s;\n}\n\n#frotateG_06 {\n  right: 15px;\n  bottom: 15px;\n  animation-delay: 1.2s;\n  -o-animation-delay: 1.2s;\n  -ms-animation-delay: 1.2s;\n  -webkit-animation-delay: 1.2s;\n  -moz-animation-delay: 1.2s;\n}\n\n#frotateG_07 {\n  left: 51px;\n  bottom: 0;\n  animation-delay: 1.35s;\n  -o-animation-delay: 1.35s;\n  -ms-animation-delay: 1.35s;\n  -webkit-animation-delay: 1.35s;\n  -moz-animation-delay: 1.35s;\n}\n\n#frotateG_08 {\n  left: 15px;\n  bottom: 15px;\n  animation-delay: 1.5s;\n  -o-animation-delay: 1.5s;\n  -ms-animation-delay: 1.5s;\n  -webkit-animation-delay: 1.5s;\n  -moz-animation-delay: 1.5s;\n}\n\n@keyframes f_fadeG {\n  0% {\n    background-color: rgb(0, 0, 0);\n  }\n\n  100% {\n    background-color: rgb(255, 255, 255);\n  }\n}\n\n@-o-keyframes f_fadeG {\n  0% {\n    background-color: rgb(0, 0, 0);\n  }\n\n  100% {\n    background-color: rgb(255, 255, 255);\n  }\n}\n\n@-ms-keyframes f_fadeG {\n  0% {\n    background-color: rgb(0, 0, 0);\n  }\n\n  100% {\n    background-color: rgb(255, 255, 255);\n  }\n}\n\n@-webkit-keyframes f_fadeG {\n  0% {\n    background-color: rgb(0, 0, 0);\n  }\n\n  100% {\n    background-color: rgb(255, 255, 255);\n  }\n}\n\n@-moz-keyframes f_fadeG {\n  0% {\n    background-color: rgb(0, 0, 0);\n  }\n\n  100% {\n    background-color: rgb(255, 255, 255);\n  }\n}\n",""]);const o=a},3226:(t,e,i)=>{i.d(e,{Z:()=>r});var n=i(9367);class r extends n.Z{constructor(){super(n.C.Info)}}},22:(t,e,i)=>{i.d(e,{Z:()=>r});var n=i(9367);class r extends n.Z{constructor(){super(n.C.Warning)}}},5650:(t,e,i)=>{i.r(e),i.d(e,{default:()=>ot});var n=i(1567),r=i(6249);const s="card-button--lLCM6",a="card-button_hide--GXukV",o="card-button_disabled--z5CXB";var c=i(891);const h={Strings:{NO_DATA:{"en-US":"n/a",en:"n/a",ru:"н/д"},EMPTY_TEXT:{"en-US":"",en:"",ru:""},MESSAGE_CUSTOMER_ID_NOT_FOUND:{"en-US":"Customer ID not found",en:"Customer ID not found",ru:"ID покупателя не найдено"},SKU_NOT_AVAILABLE:{"en-US":"SKU for the product is not available",en:"SKU for the product is not available",ru:"SKU для данного продукта недоступно"},PRODUCT_ADDED:{"en-US":"Product added to your cart",en:"Product added to your cart",ru:"Продукт добавлен в вашу корзину"},PRODUCT_REMOVED:{"en-US":"Product removed from your cart",en:"Product removed from your cart",ru:"Продукт удален из вашей корзины"},ACTIVE_CART_NOT_FOUND:{"en-US":"Active cart not found",en:"Active cart not found",ru:"Активная корзина не найдена"}}};var l=i(928),d=i(7652),A=i(8678),g=(i(212),i(8492),i(1580),i(3379)),p=i.n(g),u=i(7795),m=i.n(u),f=i(569),E=i.n(f),b=i(3565),C=i.n(b),T=i(9216),P=i.n(T),_=i(4589),v=i.n(_),w=i(2523),y={};y.styleTagTransform=v(),y.setAttributes=C(),y.insert=E().bind(null,"head"),y.domAPI=m(),y.insertStyleElement=P(),p()(w.Z,y),w.Z&&w.Z.locals&&w.Z.locals;const I="slider-popup__container--XLRAT";class N{constructor(t){this.creator=new r.Z,this.imagesUrl=[],this.imagesUrl=t.slice(),this.element=this.creator.createTagElement("div",[I]),this.closeButton=this.createCloseButton();const e=this.creator.createTagElement("div",["swiper"]);this.sliderWrapper=this.creator.createTagElement("div",["swiper-wrapper"]),this.pagination=this.creator.createTagElement("div",["swiper-pagination"]),this.swiperButtonPrev=this.creator.createTagElement("div",["swiper-button-prev"]),this.swiperButtonNext=this.creator.createTagElement("div",["swiper-button-next"]),e.append(this.sliderWrapper,this.pagination,this.swiperButtonPrev,this.swiperButtonNext,this.closeButton),this.element.append(e),this.addSlides(),this.configClose()}getElement(){return this.element}configClose(){this.element.addEventListener("click",this.closeHandler.bind(this))}createCloseButton(){return this.closeButton=this.creator.createTagElement("a",["slider-popup__close-button--fYNhM"]),this.closeButton.addEventListener("click",(()=>this.element.remove())),this.closeButton}closeHandler(t){t instanceof PointerEvent&&t.target instanceof HTMLElement&&t.target.classList.contains(I)&&this.element.remove()}addSlides(){this.imagesUrl.forEach(((t,e,i)=>{const n=this.creator.createTagElement("div",["swiper-slide"]),r=this.creator.createTagElement("img",["slider-popup__image--hgVZR"]);r.setAttribute("src",t),n.append(r),this.sliderWrapper.append(n),e===i.length-1&&r.addEventListener("load",this.initSwiper.bind(this))}))}initSwiper(){new d.Z(".swiper",{modules:[A.W_,A.tl],speed:500,direction:"horizontal",loop:!0,pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},keyboard:!0})}}var D=i(2953),G=i(8624),R=i(3226),S=i(4296),B=i(7881);class Z extends l.Z{constructor(t,e,i){super({tag:n.Z.DIV,classNames:["product-card--s0pAM","product-card__link--bP6bY"],textContent:""}),this.URL_NO_IMAGE="",this.LANG="en-US",this.COUNTRY="US",this.creator=new r.Z,this.observer=S.Z.getInstance(),this.product=t,this.router=e,this.api=i,this.buttonAddToCart=this.createButtonAddToCart(),this.buttonRemoveFromCart=this.createButtonRemoveFromCart(),this.hideCartButton(this.buttonRemoveFromCart),this.configView()}getProductId(){return this.product.id}setProductInCart(t){t?(this.disableCartButton(this.buttonAddToCart),this.showCartButton(this.buttonRemoveFromCart)):(this.enableCartButton(this.buttonAddToCart),this.hideCartButton(this.buttonRemoveFromCart))}disableCartButton(t){t.classList.add(o)}enableCartButton(t){t.classList.remove(o)}hideCartButton(t){t.classList.add(a)}showCartButton(t){t.classList.remove(a)}getImagesUrl(){return this.product.masterVariant?.images?.map((t=>t.url))||[]}addProductHandler(t){t.stopPropagation();const{sku:e}=this.product.masterVariant;e?this.checkCartExistAndAddProduct(e):(new G.Z).showMessage(h.Strings.SKU_NOT_AVAILABLE[this.LANG])}checkCartExistAndAddProduct(t){this.api.getClientApi().getActiveCart().then((e=>{const i=e.body.id;this.addProductToCart(i,t),localStorage.setItem(D.Z.ANONIM_CART_ID,i)})).catch((()=>{this.api.getClientApi().createCustomerCart().then((e=>{const i=e.body.id;localStorage.setItem(D.Z.ANONIM_CART_ID,i),this.addProductToCart(i,t)})).catch((t=>{t instanceof Error&&(new G.Z).showMessage(t.message)}))})).catch((t=>{t instanceof Error&&(new G.Z).showMessage(t.message)}))}addProductToCart(t,e){this.api.getClientApi().getCartByCartID(t).then((i=>{this.api.getClientApi().addItemToCartByID(t,i.body.version,e).then((()=>{(new R.Z).showMessage(h.Strings.PRODUCT_ADDED[this.LANG]),this.observer.notify(B.Z.ADD_TO_CART),this.observer.notify(B.Z.UPDATE_CART)}))})).catch((t=>{t instanceof Error&&(new G.Z).showMessage(t.message)}))}removeProductHandler(t){t.stopPropagation(),this.api.getClientApi().getActiveCart().then((t=>{const e=t.body.id;this.removeProductFromCart(e),localStorage.setItem(D.Z.ANONIM_CART_ID,e)})).catch((t=>{t instanceof Error&&(new G.Z).showMessage(t.message)}))}removeProductFromCart(t){this.api.getClientApi().getCartByCartID(t).then((e=>{const i=e.body.lineItems.filter((t=>t.productKey===this.product.key))[0].id;this.api.getClientApi().removeLineItem(t,e.body.version,i).then((()=>{(new R.Z).showMessage(h.Strings.PRODUCT_REMOVED[this.LANG]),this.observer.notify(B.Z.REMOVE_FROM_CART),this.observer.notify(B.Z.UPDATE_CART)}))})).catch((t=>{t instanceof Error&&(new G.Z).showMessage(t.message)}))}createButtonAddToCart(){return this.buttonAddToCart=this.creator.createTagElement("div",[s,"button-add--Qi79J"],"+"),this.buttonAddToCart.addEventListener("click",this.addProductHandler.bind(this)),this.buttonAddToCart}createButtonRemoveFromCart(){return this.buttonRemoveFromCart=this.creator.createTagElement("div",[s,"button-remove--F0aU5"],"-"),this.buttonRemoveFromCart.addEventListener("click",this.removeProductHandler.bind(this)),this.buttonRemoveFromCart}configView(){this.setRouteLink(),this.createProductView()}setRouteLink(){const t=`${c._.CATALOG}/${this.product.key}`;this.getElement().addEventListener("click",(()=>this.router.setHref(t)))}createProductView(){const t=this.getElement(),{masterVariant:e}=this.product,i=this.getImageElement(e),n=this.creator.createTagElement("div",["product-card__content-wrapper--QotyV"]);t.append(i,this.buttonRemoveFromCart,this.buttonAddToCart,n);const r=this.getTitleElement(),s=this.getDescriptionElement(),a=this.getPricesElement(e);n.append(r,s,a)}getPricesElement(t){const e=this.creator.createTagElement("span",["product-card__prices-wrapper--bYEIR"]),i=this.getLocalPrices(t),n=this.creator.createTagElement("span",["product-card__price--CA0vt"],i.value);if(e.append(n),i.discount){n.classList.add("product-card__price_discounted--mwMfR");const t=this.creator.createTagElement("span",["product-card__discount--qqqII"],i.discount);e.append(t)}return e}getDescriptionElement(){const t=this.product.description?.[this.LANG]||h.Strings.EMPTY_TEXT[this.LANG];return this.creator.createTagElement("span",["product-card__description--umGvb"],t)}getTitleElement(){const t=this.product.name[this.LANG]||h.Strings.NO_DATA[this.LANG];return this.creator.createTagElement("span",["product-card__title--h2nFl"],t)}getImageElement(t){const e=t.images?t.images[0].url:this.URL_NO_IMAGE,i=this.creator.createTagElement("img",["product-card__image--ReLtA"]);return i.setAttribute("src",e),i.addEventListener("click",this.showSliderPopup.bind(this)),i}showSliderPopup(t){t.stopPropagation();const e=this.getImagesUrl(),i=new N(e);document.body.append(i.getElement())}getLocalPrices(t){const e={value:"",discount:""},{prices:i}=t;if(i){const t=i.filter((t=>t.country===this.COUNTRY));if(t.length>0){const{value:i}=t[0];e.value=`${(i.centAmount/100).toFixed(i.fractionDigits)} ${i.currencyCode}`;const{discounted:n}=t[0];n?.value&&(e.discount=`${(n.value.centAmount/100).toFixed(n.value.fractionDigits)} ${n.value.currencyCode}`)}}return e}}var O=i(1349);class L{constructor(t,e){const i=new r.Z;this.element=i.createTagElement("label",["number-input__label--TBM3m"],t),this.input=i.createTagElement("input",["number-input--gINc4"]),this.input.setAttribute("type","number"),this.input.setAttribute("step","0.01"),this.element.setAttribute("placeholder",e||""),this.element.append(this.input)}getElement(){return this.element}set value(t){this.input.value=t}get value(){return this.input.value}setPlaceholder(t){this.element.setAttribute("placeholder",t)}}var F;!function(t){t.GENGE="genre",t.PLATFORM="Platform",t.DEVELOPER="developer"}(F||(F={}));const M=F;var U=i(213);class k{constructor(t,e,i){this.callback=i,this.element=(new r.Z).createTagElement("a",["filter-tag--f0cx7"],`${t}: ${e}`),this.element.addEventListener("click",this.clickHandler.bind(this))}getElement(){return this.element}clickHandler(){this.callback()}}class x extends l.Z{constructor(){super({tag:n.Z.DIV,classNames:["filter-header--ULKrZ"],textContent:""}),this.BUTTON_TEXT="Filter",this.tagWrapper=this.createTagWrapper(),this.observer=S.Z.getInstance(),this.configView()}configView(){const t=this.createFilterButton();this.getElement().append(t.getElement(),this.tagWrapper)}createTagWrapper(){return this.tagWrapper=(new r.Z).createTagElement("div",["filter-header__tag-wrapper--Zv2pn"]),this.tagWrapper}addFilterTag(t,e,i){const n=new k(t,e,i);this.tagWrapper.append(n.getElement())}clearFilterTags(){this.tagWrapper.replaceChildren("")}createFilterButton(){return new U.Z(this.BUTTON_TEXT,(()=>{this.observer.notify(B.Z.SHOW_FILTER)}))}}class Y{constructor(t,e,i=(()=>{})){this.label=t,this.filters=e,this.callback=i;const n=new r.Z,s=n.createTagElement("label",["filter-checkbox__label--L72qn"],this.label);this.checkbox=n.createTagElement("input",["filter-checkbox--Ehil7"]),this.checkbox.setAttribute("type","checkbox"),e.includes(this.label)&&this.checkbox.setAttribute("checked",""),s.prepend(this.checkbox),this.element=s}getElement(){return this.element}updateSource(){const t=this.filters.indexOf(this.label);this.checkbox.checked&&t<0&&this.filters.push(this.label),!this.checkbox.checked&&t>=0&&this.filters.splice(t)}}const V="filter-popup__group--o_qHh",H="filter-popup__group-legend--Cm2NV";var W;!function(t){t.ENTER="Enter",t.NUMPAD_ENTER="NumpadEnter",t.ESC="Escape"}(W||(W={}));class Q{constructor(t,e,i){this.filterInputs=[],this.BUTTON_APPLY_TEXT="Apply",this.PRICE_FILTER_TITLE="price",this.POPUP_TITLE="Filter",this.tagCreator=new r.Z,this.observer=S.Z.getInstance(),this.element=this.tagCreator.createTagElement("dialog",["filter-popup--FOGM1"]),this.filterUsed=e,this.filterData=t,this.priceGroup=i,this.configView(),this.configClosing()}getDialog(){return this.element}configView(){const t=this.tagCreator.createTagElement("div",["filter-popup__wrapper--cf0us"]),e=this.tagCreator.createTagElement("span",["filter-popup__title--_mmc9"],this.POPUP_TITLE);t.append(e),t.append(this.createGroupPrice()),t.append(this.createGroupGenre()),t.append(this.createGroupPlatform()),t.append(this.createGroupDeveloper());const i=this.createApplyButton();t.append(i.getElement());const n=this.createCloseButton();t.append(n),this.element.append(t)}createCloseButton(){const t=this.tagCreator.createTagElement("a",["filter-popup__close-icon--CenEx"]);return t.addEventListener("click",(()=>this.getDialog().remove())),t.setAttribute("tabindex","1"),t.setAttribute("autofocus",""),t}createApplyButton(){return new U.Z(this.BUTTON_APPLY_TEXT,(()=>{this.filterInputs.forEach((t=>t.updateSource())),this.observer.notify(B.Z.UPDATE_CATALOG_CARDS),this.observer.notify(B.Z.UPDATE_FILTER_TAGS),this.getDialog().remove()}))}createGroupDeveloper(){const t=this.tagCreator.createTagElement("fieldset",[V]),e=this.tagCreator.createTagElement("legend",[H],M.DEVELOPER);return t.append(e),this.filterData[M.DEVELOPER].forEach((e=>{const i=new Y(e,this.filterUsed[M.DEVELOPER]);this.filterInputs.push(i),t.append(i.getElement())})),t}createGroupPlatform(){const t=this.tagCreator.createTagElement("fieldset",[V]),e=this.tagCreator.createTagElement("legend",[H],M.PLATFORM);return t.append(e),this.filterData[M.PLATFORM].forEach((e=>{const i=new Y(e,this.filterUsed[M.PLATFORM]);this.filterInputs.push(i),t.append(i.getElement())})),t}createGroupPrice(){const t=this.tagCreator.createTagElement("fieldset",[V]),e=this.tagCreator.createTagElement("legend",[H],this.PRICE_FILTER_TITLE),i=this.tagCreator.createTagElement("div",["filter-popup__price-wrapper--dYS00"]);return i.append(this.priceGroup.minPrice.getElement(),this.priceGroup.maxPrice.getElement()),t.append(e,i),t}createGroupGenre(){const t=this.tagCreator.createTagElement("fieldset",[V]),e=this.tagCreator.createTagElement("legend",[H],M.GENGE);return t.append(e),this.filterData[M.GENGE].forEach((e=>{const i=new Y(e,this.filterUsed[M.GENGE]);this.filterInputs.push(i),t.append(i.getElement())})),t}configClosing(){const t=this.onCloseDialog.bind(this);this.element.addEventListener("click",t),this.element.addEventListener("keydown",t)}onCloseDialog(t){t instanceof KeyboardEvent&&t.code===W.ESC&&this.element.remove(),t instanceof MouseEvent&&t.target instanceof HTMLDialogElement&&this.element.remove()}}class z{constructor(t){this.WRONG_PRICE_RANGE="Price filter didn't applied.\n Wrong price range: %MIN% to %MAX%",this.MIN_PRICE_TITLE="min",this.MAX_PRICE_TITLE="max",this.CURRENCY_FACTOR=100,this.filterData=this.getEmptyFilterArray(),this.filterUsed=this.getEmptyFilterArray(),this.filterPriceData=this.getEmptyPriceData(),this.filterHeader=new x,this.observer=S.Z.getInstance(),this.api=t,this.getFilterData(),this.createFilterTags(),this.observer.subscribe(B.Z.SHOW_FILTER,this.showFilterPopup.bind(this)),this.observer.subscribe(B.Z.UPDATE_FILTER_TAGS,this.createFilterTags.bind(this))}getFilterData(){this.api.getProductApi().getProducts().then((t=>{const{results:e}=t.body;e.forEach((t=>{const{attributes:e}=t.masterVariant;e&&e.forEach((t=>{t.name===M.GENGE&&this.filterData[M.GENGE].push(t.value[0].key),t.name===M.PLATFORM&&this.filterData[M.PLATFORM].push(t.value[0].key),t.name===M.DEVELOPER&&this.filterData[M.DEVELOPER].push(t.value[0])}))})),this.filterData.genre=Array.from(new Set(this.filterData.genre)),this.filterData.Platform=Array.from(new Set(this.filterData.Platform)),this.filterData.developer=Array.from(new Set(this.filterData.developer))})).catch((t=>(new G.Z).showMessage(t.message)))}getFilterHeaderElement(){return this.filterHeader.getCreator().getElement()}getEmptyPriceData(){return{minPrice:new L(this.MIN_PRICE_TITLE,""),maxPrice:new L(this.MAX_PRICE_TITLE,"")}}getEmptyFilterArray(){return{genre:[],Platform:[],developer:[]}}clearFilters(){this.filterUsed=this.getEmptyFilterArray(),this.filterPriceData=this.getEmptyPriceData(),this.createFilterTags()}showFilterPopup(){const t=new Q(this.filterData,this.filterUsed,this.filterPriceData).getDialog();document.body.prepend(t),t.showModal()}createFilterTags(){this.filterHeader.clearFilterTags(),this.filterUsed.genre.forEach((t=>{this.filterHeader.addFilterTag(M.GENGE,t,this.deleteFilterTag.bind(this,this.filterUsed.genre,t))})),this.filterUsed.Platform.forEach((t=>{this.filterHeader.addFilterTag(M.PLATFORM,t,this.deleteFilterTag.bind(this,this.filterUsed.Platform,t))})),this.filterUsed.developer.forEach((t=>{this.filterHeader.addFilterTag(M.DEVELOPER,t,this.deleteFilterTag.bind(this,this.filterUsed.developer,t))}))}deleteFilterTag(t,e){const i=t.indexOf(e);i>=0&&t.splice(i,1),this.observer.notify(B.Z.UPDATE_CATALOG_CARDS),this.observer.notify(B.Z.UPDATE_FILTER_TAGS)}getFilterCondition(){return[this.getFilterForArrtibute(O.Y.ENUM_ATTRIBUTE_MASK,M.GENGE),this.getFilterForArrtibute(O.Y.ENUM_ATTRIBUTE_MASK,M.PLATFORM),this.getFilterForArrtibute(O.Y.TEXT_ATTRIBUTE_MASK,M.DEVELOPER),this.getFilterForPrice(O.Y.PRICE_FILTER_MASK)].filter((t=>t))}getFilterForPrice(t){const e=this.filterPriceData.minPrice.value||"0",i=this.filterPriceData.maxPrice.value||"0";return+e>+i||+e<0||+i<0?((new G.Z).showMessage(this.WRONG_PRICE_RANGE.replace("%MIN%",e).replace("%MAX%",i)),""):0==+e&&0==+i?"":(this.filterPriceData.minPrice.value=e,t.replace("%MIN%",(+e*this.CURRENCY_FACTOR).toString()).replace("%MAX%",(+i*this.CURRENCY_FACTOR).toString()))}getFilterForArrtibute(t,e){const i=[];return this.filterUsed[e].forEach((t=>i.push(`"${t}"`))),i.length>0?t.replace("%ATTRIBUTE%",e).replace("%VALUE%",i.join(",")):""}}var K,X;!function(t){t.ASC="▲",t.DESC="▼"}(K||(K={})),function(t){t[t.NAME_ASC=0]="NAME_ASC",t[t.NAME_DESC=1]="NAME_DESC",t[t.PRICE_ASC=2]="PRICE_ASC",t[t.PRICE_DESC=3]="PRICE_DESC"}(X||(X={}));class j extends l.Z{constructor(){super({tag:n.Z.DIV,classNames:["sort-header--Jog3u"],textContent:""}),this.sortCondition=X.NAME_ASC,this.observer=S.Z.getInstance(),this.options=[{title:`Name ${K.ASC}`,value:X.NAME_ASC,sortOrder:"name.en asc"},{title:`Name ${K.DESC}`,value:X.NAME_DESC,sortOrder:"name.en desc"},{title:`Price ${K.ASC}`,value:X.PRICE_ASC,sortOrder:"variants.scopedPrice.currentValue.centAmount asc"},{title:`Price ${K.DESC}`,value:X.PRICE_DESC,sortOrder:"variants.scopedPrice.currentValue.centAmount desc"}],this.sortList=this.createSortList(),this.configView()}configView(){this.sortList.addEventListener("change",this.sortHandler.bind(this)),this.getElement().append(this.sortList)}getSortCondition(){return this.options[this.sortList.selectedIndex].sortOrder}sortHandler(){this.observer.notify(B.Z.UPDATE_CATALOG_CARDS)}createSortList(){const t=new r.Z,e=t.createTagElement("select",["sort-header__list--SSlNO"]);return this.options.forEach((i=>{const n=t.createTagElement("option",["sort-header__option--MsrVg"],i.title);n.setAttribute("value",i.value.toString()),e.append(n)})),e}}class q{constructor(t){this.PLACEHOLDER="Ask me...",this.callback=t;const e=new r.Z;this.element=e.createTagElement("input",["search-input--pnryc"]),this.element.setAttribute("type","search"),this.element.setAttribute("placeholder",this.PLACEHOLDER),this.element.addEventListener("search",(()=>t()))}getElement(){return this.element}clear(){this.element.value=""}getSearchString(){return this.element.value.trim()}}var J=i(22);var $,tt=i(7286);class et extends l.Z{constructor(t,e,i){super({tag:n.Z.NAV,classNames:["pagination--mywBk"],textContent:""}),this.config=t,this.paginations=e,this.callback=i,this.buttonPrev=new tt.Z(this.clickPrevButtonHandler.bind(this),"pagination__button-prev--MS7sm"),this.buttonNext=new tt.Z(this.clickNextButtonHandler.bind(this),"pagination__button-next--wonQK"),this.setupButtons(),this.configView()}initConfig(t){this.config=this.correctConfig(t),this.setupButtons()}setupButtons(){if(this.config.total<=0)return this.buttonPrev.disableButton(),void this.buttonNext.disableButton();this.config.offset+this.config.limit>=this.config.total?this.buttonNext.disableButton():this.buttonNext.enableButton(),0===this.config.offset?this.buttonPrev.disableButton():this.buttonPrev.enableButton()}correctConfig(t){return this.config=t,this.config.offset=0,this.config.currentPage=0,t}configView(){this.setupButtons(),this.getElement().append(this.buttonPrev.getElement(),this.buttonNext.getElement())}clickPrevButtonHandler(){this.config.offset-this.config.limit<=0?(this.config.offset=0,this.config.currentPage=0):(this.config.offset-=this.config.limit,this.config.currentPage-=1),this.paginations.forEach((t=>t.setupButtons())),this.callback()}clickNextButtonHandler(){this.config.offset+this.config.limit<this.config.total&&(this.config.offset+=this.config.limit,this.config.currentPage+=1,this.paginations.forEach((t=>t.setupButtons())),this.callback())}}!function(t){t[t.PAGINATION_TOP=0]="PAGINATION_TOP",t[t.PAGINATION_BOTTOM=1]="PAGINATION_BOTTOM"}($||($={}));const it=$;var nt=i(4602),rt=i(5318),st={};st.styleTagTransform=v(),st.setAttributes=C(),st.insert=E().bind(null,"head"),st.domAPI=m(),st.insertStyleElement=P(),p()(rt.Z,st),rt.Z&&rt.Z.locals&&rt.Z.locals;class at{constructor(){const t=nt.Z.ElementFromHTML('<div id="floatingCirclesG"> <div class="f_circleG" id="frotateG_01"></div> <div class="f_circleG" id="frotateG_02"></div> <div class="f_circleG" id="frotateG_03"></div> <div class="f_circleG" id="frotateG_04"></div> <div class="f_circleG" id="frotateG_05"></div> <div class="f_circleG" id="frotateG_06"></div> <div class="f_circleG" id="frotateG_07"></div> <div class="f_circleG" id="frotateG_08"></div> </div> ');this.element=(new r.Z).createTagElement("div",["spinner"]),this.element.append(t),S.Z.getInstance().subscribe(B.Z.SPINNER_SHOW,this.showSpinner.bind(this)),S.Z.getInstance().subscribe(B.Z.SPINNER_HIDE,this.hideSpinner.bind(this))}getElement(){return this.element}showSpinner(){this.getElement().classList.remove("spinner_hide")}hideSpinner(){this.getElement().classList.add("spinner_hide")}}class ot extends l.Z{constructor(t,e){super({tag:n.Z.SECTION,classNames:["catalog-view--MIS7q"],textContent:""}),this.LANG="en-US",this.COUNTRY="US",this.CARDS_COUNT=6,this.NOT_FOUND="Products not found",this.MESSAGE_CUSTOMER_ID_NOT_FOUND="Customer ID not found",this.pagination=[],this.cards=[],this.observer=S.Z.getInstance(),this.spinner=new at,this.api=e.api,this.filter=new z(this.api),this.search=new q(this.dispatchSearch.bind(this)),this.sorting=new j,this.router=t,this.paginationConfig={total:0,limit:this.CARDS_COUNT,offset:0,currentPage:0},this.pagination.push(new et(this.paginationConfig,this.pagination,this.dispatchDataQuery.bind(this))),this.pagination.push(new et(this.paginationConfig,this.pagination,this.dispatchDataQuery.bind(this))),this.initPagination(),this.observer.subscribe(B.Z.UPDATE_CATALOG_CARDS,this.recallProductCards.bind(this)),this.observer.subscribe(B.Z.UPDATE_CART,this.checkProductsInCart.bind(this)),this.observer.subscribe(B.Z.LOGIN,this.checkProductsInCart.bind(this)),this.observer.subscribe(B.Z.LOGOUT,this.checkProductsInCart.bind(this)),this.controlsWrapper=(new r.Z).createTagElement("div",["controls-wrapper--gM5pc"]),this.cardsWrapper=(new r.Z).createTagElement("div",["content-wrapper--zfsyF"]),this.getElement().append(this.spinner.getElement(),this.cardsWrapper),this.configView()}dispatchDataQuery(){this.search.getSearchString()?this.getSearchProducts():this.getProducts()}dispatchSearch(){this.pagination.forEach((t=>t.initConfig(this.paginationConfig))),this.getSearchProducts()}initPagination(){this.observer.notify(B.Z.SPINNER_SHOW),this.api.getProductApi().getProducts({limit:0}).then((t=>{this.paginationConfig.total=t.body?.total||0,this.pagination.forEach((t=>t.initConfig(this.paginationConfig)))})).catch((t=>(new G.Z).showMessage(t.message))).finally((()=>this.observer.notify(B.Z.SPINNER_HIDE)))}checkProductsInCart(){this.api.getClientApi().getActiveCart().then((t=>{const e=t.body.lineItems.map((t=>t.productId));this.cards.forEach((t=>{t.setProductInCart(e.includes(t.getProductId()))}))})).catch((()=>{this.cards.forEach((t=>{t.setProductInCart(!1)}))}))}recallProductCards(){this.search.clear(),this.pagination.forEach((t=>t.initConfig(this.paginationConfig))),this.getProducts()}configView(){const t=this.filter.getFilterHeaderElement(),e=this.sorting.getElement();this.controlsWrapper.append(t,this.search.getElement(),e),this.getElement().append(this.controlsWrapper,this.pagination[it.PAGINATION_TOP].getElement(),this.cardsWrapper,this.pagination[it.PAGINATION_BOTTOM].getElement()),this.getProducts()}getSearchProducts(){const t=this.search.getSearchString();if(t){const e=this.getSearchQueryParams(t);e.limit=this.paginationConfig.limit,e.offset=this.paginationConfig.offset,this.observer.notify(B.Z.SPINNER_SHOW),this.api.getProductApi().getProducts(e).then((t=>{t.body?.total&&this.paginationConfig.total!==t.body?.total&&(this.paginationConfig.total=t.body?.total||0,this.pagination.forEach((t=>t.setupButtons())));const e=t.body.results;e.length?(this.filter.clearFilters(),this.createProductCards(e)):(new J.Z).showMessage(this.NOT_FOUND)})).catch((t=>(new G.Z).showMessage(t.message))).finally((()=>this.observer.notify(B.Z.SPINNER_HIDE)))}else this.getProducts()}getProducts(){const t=this.getQueryParams();t.limit=this.paginationConfig.limit,t.offset=this.paginationConfig.offset,this.observer.notify(B.Z.SPINNER_SHOW),this.api.getProductApi().getProducts(t).then((t=>{this.paginationConfig.total!==t.body?.total&&(this.paginationConfig.total=t.body?.total||0,this.pagination.forEach((t=>t.setupButtons()))),this.paginationConfig.total=t.body?.total||0;const e=t.body.results;this.createProductCards(e),e.length||(new J.Z).showMessage(this.NOT_FOUND)})).catch((t=>{t instanceof Error&&(new G.Z).showMessage(t.message)})).finally((()=>this.observer.notify(B.Z.SPINNER_HIDE)))}getQueryParams(){const t={fuzzy:!1,priceCountry:"US",priceCurrency:"USD",markMatchingVariants:!0,sort:this.sorting.getSortCondition()},e=this.filter.getFilterCondition();e.length&&(t.filter=e);const i=this.sorting.getSortCondition();return i&&(t.sort=i),t}getSearchQueryParams(t){return{"text.en":t,fuzzy:!0,priceCountry:"US",priceCurrency:"USD",markMatchingVariants:!0}}createProductCards(t){this.cardsWrapper.replaceChildren(""),this.cards.length=0,t.forEach((t=>{if(t.key){const e=new Z(t,this.router,this.api);this.cards.push(e),this.cardsWrapper.append(e.getElement())}})),this.checkProductsInCart()}}},9954:t=>{t.exports="data:application/font-woff;charset=utf-8;base64, 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"}}]);