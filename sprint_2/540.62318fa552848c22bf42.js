"use strict";(self.webpackChunkecommerce_application=self.webpackChunkecommerce_application||[]).push([[540],{540:(t,e,s)=>{s.d(e,{getView:()=>y});const i="registrationView__inputsGroup--s2afB",n="registrationView__form--yXlDY";var a,r,l,o,u,T,c,p=s(567);!function(t){t.PASSWORD="password",t.EMAIL="email",t.TEXT="text",t.DATE="date",t.CHECKBOX="checkbox"}(a||(a={})),function(t){t.PASSWORD="password",t.EMAIL="email",t.REPEAT_PASSWORD="repeat-password",t.FIRST_NAME="first-name",t.LAST_NAME="last-name",t.DATE_OF_BIRTH="date-of-birth",t.SHIPPING_CITY="shipping-city",t.SHIPPING_STREET="shipping-street",t.SHIPPING_POSTAL="shipping-postal",t.SHIPPING_COUNTRY="shipping-country",t.BILLING_CITY="billing-city",t.BILLING_STREET="billing-street",t.BILLING_POSTAL="billing-postal",t.BILLING_COUNTRY="country"}(r||(r={})),function(t){t.PASSWORD="PASSWORD",t.EMAIL="EMAIL",t.REPEAT_PASSWORD="RETRY THE PASSWORD",t.FIRST_NAME="FIRST NAME",t.LAST_NAME="LAST NAME",t.CITY="CITY",t.STREET="STREET",t.POSTAL="POSTAL",t.COUNTRY="COUNTRY"}(l||(l={})),function(t){t.PASSWORD="Minimum 8 characters, at least 1 uppercase letter, 1 lowercase letter, 1 number and 1 special character",t.PASSWORD_REPEAT="The passwords must match",t.EASY_TEXT="Must contain at least one character",t.DATE_OF_BIRTH_HINT="Only 13 years old or older",t.TEXT="Must contain at least one character and no special characters or numbers",t.POSTAL_HINT="Must follow the format for the country (e.g., 12345 or A1B 2C3 for the U.S. and Canada, respectively)",t.COUNTRY_HINT="Must be a valid country from a predefined list or autocomplete field",t.WRONG_COUNTRY="Select country"}(o||(o={})),function(t){t.PASSWORD="^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[!@#$%^&*])[A-Za-z\\d!@#$%^&*]{8,}$",t.TEXT="^(?!.*\\d)(?!.*[!@#$%^&*])[А-Яа-яA-Za-z\\d!@#$%^&*]{1,}$",t.DATE_OF_BIRTH_MAX="13"}(u||(u={})),T||(T={}),function(t){t.SHIPPING_ADDRESS="DELIVERY ADDRESS",t.BILLING_ADDRESS="BILLING ADDRESS"}(c||(c={}));var I;!function(t){t.CLICK="click",t.BLUR="blur",t.CHANGE="change"}(I||(I={}));const E=I;var h;!function(t){t.BUTTON_DEFAULT="Make it default",t.BUTTON_UN_DEFAULT="Add billing address",t.BUTTON_SUBMIT="submit",t.SHOW_BUTTON="show",t.TITLE="Registration Page",t.DESCRIPTION="After filling in all the fields, press the confirmation button"}(h||(h={}));const S=h;class m{constructor(t){this.inputElement=document.createElement("input"),this.messageElement=document.createElement(p.Z.SPAN),this.element=document.createElement(p.Z.DIV),this.createElement(t),this.inputElement.addEventListener(E.CHANGE,this.showErrorhandler.bind(this)),t.attributes.title?(this.title=t.attributes.title,this.messageText=this.title):(this.title="",this.messageText=this.inputElement.validationMessage)}setAttribute(t,e){this.inputElement.setAttribute(t,e)}removeAttribute(t){this.inputElement.removeAttribute(t)}removeMessage(){this.element.removeChild(this.messageElement)}appendMessage(){this.element.append(this.messageElement)}setMessageError(t){this.messageElement.textContent=t}setCustomValidity(t){this.inputElement.setCustomValidity(t)}setInputValue(t){this.inputElement.value=t}getElement(){return this.element}getInputValue(){return this.inputElement.value}getInput(){return this.inputElement}getTitle(){return this.getInput().title}setTitle(t){this.inputElement.title=t,this.title=t}setPattern(t){this.inputElement.pattern=t}createElement(t){if(this.element.classList.add("input__container--TYJjR"),t.classNames&&this.element.classList.add(...t.classNames),this.createInput(t),void 0!==t.callback){let e;!function(t){t[t.HANDLER=0]="HANDLER",t[t.EVENT=1]="EVENT"}(e||(e={})),t.callback.forEach((t=>{this.setCallback(t[e.HANDLER],t[e.EVENT])}))}this.messageElement=document.createElement(p.Z.SPAN),this.showErrorhandler(),this.messageElement.classList.add("input__symbol--TTeU5"),this.element.append(this.inputElement,this.messageElement)}setCallback(t,e){this.inputElement.addEventListener(e,t)}createInput(t){this.inputElement.classList.add("input--DAGU8"),this.inputElement.required=!0,this.setAttributes(t.attributes),t.attributes.type===a.PASSWORD&&this.showPassword()}setAttributes(t){Object.entries(t).forEach((([t,e])=>{this.inputElement.setAttribute(t,e)}))}showPassword(){const t=document.createElement("input");t.type=a.CHECKBOX;const e=document.createElement("label");e.textContent=S.SHOW_BUTTON,e.append(t),e.classList.add("inputShowPassword--jXW3M"),this.element.append(e),this.inputElement.classList.add("input_password--e4VKU"),t.addEventListener(E.CLICK,this.toggleVisibilityHandler.bind(this))}toggleVisibilityHandler(){this.inputElement.type===a.PASSWORD?this.inputElement.type=a.TEXT:this.inputElement.type=a.PASSWORD}showErrorhandler(){this.messageText=this.inputElement.validationMessage,this.inputElement.validity.patternMismatch&&(this.messageText=this.title),this.messageElement.textContent=this.messageText}}var d,A=s(928);!function(t){t.MAIN="main",t.SHIPPING="shipping",t.BILLING="billing"}(d||(d={}));const N=d;var _;!function(t){t.COUNTRY="country"}(_||(_={}));const L=_;var P;!function(t){t.SUBMIT="submit",t.BUTTON="button"}(P||(P={}));const R=P;var O;!function(t){t[t.EMAIL=0]="EMAIL",t[t.PASSWORD=1]="PASSWORD",t[t.REPEAT_PASSWORD=2]="REPEAT_PASSWORD",t[t.FIRST_NAME=3]="FIRST_NAME",t[t.LAST_NAME=4]="LAST_NAME",t[t.DATE_OF_BIRTH=5]="DATE_OF_BIRTH",t[t.SHIPPING_CITY=6]="SHIPPING_CITY",t[t.SHIPPING_STREET=7]="SHIPPING_STREET",t[t.SHIPPING_POSTAL=8]="SHIPPING_POSTAL",t[t.SHIPPING_COUNTRY=9]="SHIPPING_COUNTRY",t[t.BILLING_CITY=10]="BILLING_CITY",t[t.BILLING_STREET=11]="BILLING_STREET",t[t.BILLING_POSTAL=12]="BILLING_POSTAL",t[t.BILLING_COUNTRY=13]="BILLING_COUNTRY"}(O||(O={}));const g=O;var D;!function(t){t.SIX_DIGITS="^[0-9]{6,6}$",t.FIVE_DIGITS="^[0-9]{5,5}$",t.FOUR_DIGITS="^[0-9]{4,4}$",t.TWO_DIGITS="^[0-9]{2,2}$",t.TWO_LETTERS_THREE_DIGITS="^[A-Z][A-Z][0-9]{3,3}$",t.TWO_LETTERS_FOUR_DIGITS="^[A-Z][A-Z][0-9]{4,4}$",t.TWO_LETTERS_FIVE_DIGITS="^[A-Z][A-Z][0-9]{5,5}$"}(D||(D={}));const C=D;var G;!function(t){t.SIX_DIGITS="must consist of six numbers",t.FIVE_DIGITS="must consist of five numbers",t.FOUR_DIGITS="must consist of four numbers",t.TWO_DIGITS="must consist of two numbers",t.TWO_LETTERS_THREE_DIGITS="must consist of two capital letters and three numbers",t.TWO_LETTERS_FOUR_DIGITS="must consist of two capital letters and four numbers",t.TWO_LETTERS_FIVE_DIGITS="must consist of two capital letters and five numbers"}(G||(G={}));const b=G;var f;!function(t){t.DISABLE="disabled"}(f||(f={}));const H=f;class B extends A.Z{constructor(){super({tag:p.Z.SECTION,classNames:["registrationView--n6v1f"],textContent:""}),this.inputs=[],this.mainInputsGroup=[],this.billingInputsGroup=[],this.shippingInputsGroup=[],this.buttonDefaultAddress=this.createDefaultButton(),this.isDefault=!1,this.countryList=this.createCountryListElement(),this.inputsParams=this.createParams(),this.configView()}configView(){const t=this.createTitle(),e=this.createDescription();this.fillInputsGroups();const s=this.createForm();this.getElement().append(t,e,s,this.countryList)}createTitle(){const t=document.createElement("h1");return t.classList.add("registrationView__tittle--nXz7b"),t.textContent=S.TITLE,t}createDescription(){const t=document.createElement("p");return t.classList.add("registrationView__description--qhfiP"),t.textContent=S.DESCRIPTION,t}createCountryListElement(){const t=document.createElement("datalist");return t.id=L.COUNTRY,this.createCountryList().flat().sort().forEach((e=>{const s=this.createOptionElement(e);t.append(s)})),t}createOptionElement(t){const e=document.createElement("option");return e.value=t,e}createCountryList(){return[["zzz"],["Czech Republic","Greece","Slovakia","Sweden"],["Guinea","Iceland","Lesotho","Madagascar","Oman","Palestine","Papua New Guinea","Afghanistan","Albania","Argentina","Armenia","Australia","Austria","Bangladesh","Belgium","Bulgaria","Cape Verde","Christmas Island","Greenland","Hungary","Liechtenstein"],["Jamaica","Singapore"],["Faroe Islands","Barbados"],["Azerbaijan","Latvia","British Virgin Islands","Saint Kitts and Nevis","Saint Vincent and the Grenadines","Samoa","Moldova"],["Lithuania","Andorra"]]}fillInputsGroups(){this.inputsParams.forEach((t=>{const e=new m(t);this.inputs.push(e),t.group&&(t.group===N.MAIN?this.mainInputsGroup.push(e):t.group===N.SHIPPING?this.shippingInputsGroup.push(e):this.billingInputsGroup.push(e))}))}createForm(){const t=document.createElement("form");t.classList.add(n);const e=document.createElement(p.Z.DIV);e.classList.add(i);const s=this.mainInputsGroup.map((t=>t.getElement()));e.append(...s);const a=this.creatLabelWithGroup(c.SHIPPING_ADDRESS,this.shippingInputsGroup),r=this.creatLabelWithGroup(c.BILLING_ADDRESS,this.billingInputsGroup),l=document.createElement(p.Z.BUTTON);l.classList.add("registrationView__button--zQmzn"),l.type=R.BUTTON,l.textContent=S.BUTTON_SUBMIT;const o=document.createElement(p.Z.DIV);return o.classList.add("registrationView__buttonWrap--Nq_7J"),o.append(l),t.append(e,a,r,o),t}creatLabelWithGroup(t,e){const s=document.createElement("label");s.textContent=t,s.classList.add(i);const n=e.map((t=>t.getElement()));return s.append(...n),t===c.SHIPPING_ADDRESS&&s.append(this.buttonDefaultAddress),s}createDefaultButton(){const t=document.createElement(p.Z.BUTTON);return t.type=R.BUTTON,t.addEventListener(E.CLICK,this.defaultToggleHandler.bind(this)),t.textContent=S.BUTTON_DEFAULT,t.classList.add("registrationView__defaultSelect--za2h9"),t}passwordCheckHandler(){const t=this.inputs[g.REPEAT_PASSWORD];this.inputs[g.PASSWORD].getInputValue()===t.getInputValue()?t.setCustomValidity(""):(t.setCustomValidity(o.PASSWORD_REPEAT),t.setTitle(o.PASSWORD_REPEAT))}validateCountryShippingHandler(){this.validateCountryList(this.inputs[g.SHIPPING_COUNTRY],this.inputs[g.SHIPPING_POSTAL])}validateCountryBillingHandler(){this.validateCountryList(this.inputs[g.BILLING_COUNTRY],this.inputs[g.BILLING_POSTAL])}validateCountryList(t,e){const s=this.createCountryList(),i=t,n=e,a=i.getInputValue();s.flat().includes(a)?(this.changePostalPatternWithCountry(n,s,a),i.setCustomValidity("")):(i.setCustomValidity(o.COUNTRY_HINT),this.changePostalPatternWithOutCountry(n))}changePostalPatternWithCountry(t,e,s){e.forEach(((e,i)=>{if(e.includes(s)){const e=Array.from(Object.values(C))[i];t.setPattern(e);const n=Array.from(Object.values(b))[i],a=`${s}\`s postal ${n}`;t.setTitle(a),t.setMessageError(a),t.setCustomValidity("")}}))}changePostalPatternWithOutCountry(t){t.setTitle(o.WRONG_COUNTRY),t.setMessageError(o.WRONG_COUNTRY),t.setCustomValidity(o.WRONG_COUNTRY)}maxPossibleDate(t){const e=new Date;return`${e.getFullYear()-Number(t)}-${e.getMonth().toString().padStart(2,"0")}-${e.getDate().toString().padStart(2,"0")}`}defaultToggleHandler(){this.isDefault?(this.isDefault=!1,this.buttonDefaultAddress.textContent=S.BUTTON_DEFAULT,this.makeSelectInputs()):(this.isDefault=!0,this.buttonDefaultAddress.textContent=S.BUTTON_UN_DEFAULT,this.makeUnSelectInputs())}makeSelectInputs(){this.billingInputsGroup.forEach((t=>{t.removeAttribute(H.DISABLE),t.appendMessage()}))}makeUnSelectInputs(){this.billingInputsGroup.forEach((t=>{t.setAttribute(H.DISABLE,"true"),t.removeMessage()})),this.shippingInputsGroup.forEach((t=>{t.getInput().addEventListener(E.CHANGE,this.changeDefaultInputs.bind(this))}))}changeDefaultInputs(t){this.shippingInputsGroup.forEach(((e,s)=>{t.target===e.getInput()&&this.billingInputsGroup[s].setInputValue(e.getInputValue())}))}createParams(){return[{classNames:[n],group:N.MAIN,attributes:{type:a.EMAIL,name:r.EMAIL,placeholder:l.EMAIL}},{classNames:[n],group:N.MAIN,attributes:{type:a.PASSWORD,name:r.PASSWORD,placeholder:l.PASSWORD,title:o.PASSWORD,pattern:u.PASSWORD}},{classNames:[n],group:N.MAIN,callback:[[this.passwordCheckHandler.bind(this),E.CHANGE]],attributes:{type:a.PASSWORD,name:r.REPEAT_PASSWORD,placeholder:l.REPEAT_PASSWORD,title:o.PASSWORD,pattern:u.PASSWORD}},{classNames:[n],group:N.MAIN,attributes:{type:a.TEXT,name:r.FIRST_NAME,placeholder:l.FIRST_NAME,title:o.TEXT,pattern:u.TEXT}},{classNames:[n],group:N.MAIN,attributes:{type:a.TEXT,name:r.LAST_NAME,placeholder:l.LAST_NAME,title:o.TEXT,pattern:u.TEXT}},{classNames:[n],group:N.MAIN,attributes:{type:a.DATE,name:r.DATE_OF_BIRTH,title:o.DATE_OF_BIRTH_HINT,max:this.maxPossibleDate(u.DATE_OF_BIRTH_MAX)}},{classNames:[n],group:N.SHIPPING,attributes:{type:a.TEXT,name:r.SHIPPING_STREET,title:o.EASY_TEXT,placeholder:l.STREET}},{classNames:[n],group:N.SHIPPING,attributes:{type:a.TEXT,name:r.SHIPPING_CITY,title:o.EASY_TEXT,placeholder:l.CITY}},{classNames:[n],group:N.SHIPPING,attributes:{type:a.TEXT,name:r.SHIPPING_POSTAL,title:o.POSTAL_HINT,placeholder:l.POSTAL}},{classNames:[n],callback:[[this.validateCountryShippingHandler.bind(this),E.CHANGE]],group:N.SHIPPING,attributes:{type:a.TEXT,name:r.SHIPPING_COUNTRY,title:o.COUNTRY_HINT,placeholder:l.COUNTRY,list:L.COUNTRY}},{classNames:[n],group:N.BILLING,attributes:{type:a.TEXT,name:r.BILLING_STREET,title:o.EASY_TEXT,placeholder:l.STREET}},{classNames:[n],group:N.BILLING,attributes:{type:a.TEXT,name:r.BILLING_CITY,title:o.EASY_TEXT,placeholder:l.CITY}},{classNames:[n],group:N.BILLING,attributes:{type:a.TEXT,name:r.BILLING_POSTAL,title:o.POSTAL_HINT,placeholder:l.POSTAL}},{classNames:[n],callback:[[this.validateCountryBillingHandler.bind(this),E.CHANGE]],group:N.BILLING,attributes:{type:a.TEXT,name:r.BILLING_COUNTRY,title:o.COUNTRY_HINT,placeholder:l.COUNTRY,list:L.COUNTRY}}]}}function y(){return new B}}}]);